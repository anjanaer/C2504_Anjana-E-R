<Border Grid.Row="2" BorderBrush="Gray" BorderThickness="1" Margin="10">
    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" Margin="10">
        <StackPanel Orientation="Vertical" Margin="10">
            <!-- Label -->
            <TextBlock Text="Filter Conditions" FontWeight="Bold" Margin="0,0,0,10"/>

            <!-- Dynamic Filter Rows -->
            <ItemsControl ItemsSource="{Binding ColumnFilters}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="0,5,0,5">
                            <!-- ComboBox for Column Selection -->
                            <ComboBox Width="200" Height="30" 
                                      ItemsSource="{Binding ColumnNames}" 
                                      SelectedItem="{Binding SelectedColumn}" 
                                      VerticalAlignment="Center" 
                                      Margin="0,0,10,0" />

                            <!-- ListBox for Unique Values -->
                            <ListBox Width="300" Height="150" 
                                     ItemsSource="{Binding FilterValues}" 
                                     SelectionMode="Multiple" 
                                     Margin="0,0,10,0">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <CheckBox Content="{Binding Value}" 
                                                  IsChecked="{Binding IsSelected}" />
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <!-- Buttons -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                <Button Content="Apply Filter" Width="100" Height="30" Margin="5" Command="{Binding ApplyFilterCommand}" />
                <Button Content="Reset Filter" Width="100" Height="30" Margin="5" Command="{Binding ResetFilterCommand}" />
                <Button Content="Import Filter..." Width="100" Height="30" Margin="5" Command="{Binding ImportFilterCommand}" />
                <Button Content="Export Filter..." Width="100" Height="30" Margin="5" Command="{Binding ExportFilterCommand}" />
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</Border>
